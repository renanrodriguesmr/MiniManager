<h3>Parâmetros de medida de performance</h3>
<div class="form-group">
  <div class="row">
    <input class="col-1 form-check-input" type="checkbox" name="performancemeasure" id="performancemeasure">
    <select class="col" name="performancemeasure_name" id="performancemeasure_name">
        {% for measure in measures %}
        <option value="{{measure.name}}">{{measure.name}}</option>
        {% endfor %}
    </select>
    <input class="col" type="text" name="performancemeasuresource" id="performancemeasuresource" placeholder="source" disabled>
    <input class="col" type="text" name="performancemeasuredestination" id="performancemeasuredestination" placeholder="destination" disabled>
    <input type="number" class="col-1" name = "performanceperiod" id="performanceperiod" placeholder="Período" disabled>
  </div>
</div>

<script>
document.getElementById('performancemeasure').onchange = function() {
  changeAvailabilityPerformance(this.checked);
};

function changeAvailabilityPerformance(checked){
  document.getElementById('performancemeasuresource').disabled = !checked;
  document.getElementById('performancemeasuredestination').disabled = !checked;
  document.getElementById('performanceperiod').disabled = !checked;
}

function fillPerformanceMeasurements(performanceMeasurements){
  resetPerformance();
  if(performanceMeasurements.length == 0){
    return;
  }

  var performancemeasureElement = document.getElementById("performancemeasure");
  performancemeasureElement.value = "on";
  performancemeasureElement.checked = true;
  changeAvailabilityPerformance(true);

  var measurement = performanceMeasurements[0];

  document.getElementById("performancemeasuresource").value = measurement.source;
  document.getElementById("performancemeasuredestination").value = measurement.destination;
  document.getElementById("performanceperiod").value = measurement.period;
  document.getElementById("performancemeasure_name").value = measurement.measure.name;
}

function resetPerformance(){
  var performancemeasureElement = document.getElementById("performancemeasure");
  performancemeasureElement.value = "off";
  performancemeasureElement.checked = false;
  changeAvailabilityPerformance(false);
  
  document.getElementById("performancemeasuresource").value = "";
  document.getElementById("performancemeasuredestination").value = "";
  document.getElementById("performanceperiod").value = "";
  document.getElementById("performancemeasure_name").value = "";
}
</script>